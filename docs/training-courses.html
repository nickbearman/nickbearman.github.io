<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Training Courses – Nick Bearman</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Nick Bearman</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./training-courses.html" aria-current="page"> 
<span class="menu-text">Training Courses</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./training-materials.html"> 
<span class="menu-text">Training Materials</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./consultancy.html"> 
<span class="menu-text">Consultancy</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./writing-presentations.html"> 
<span class="menu-text">Writing &amp; Presentations</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./blog.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="./blog.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction-to-spatial-data-using-r-as-a-gis" id="toc-introduction-to-spatial-data-using-r-as-a-gis" class="nav-link active" data-scroll-target="#introduction-to-spatial-data-using-r-as-a-gis">Introduction to Spatial Data and Using R as a GIS</a></li>
  <li><a href="#advanced-R-as-a-gis:-spatial-analysis-and-statistics" id="toc-advanced-R-as-a-gis:-spatial-analysis-and-statistics" class="nav-link" data-scroll-target="#advanced-R-as-a-gis\:-spatial-analysis-and-statistics">Advanced R as a GIS: Spatial Analysis and Statistics</a></li>
  <li><a href="#introduction-to-qgis-spatial-data-and-spatial-analysis" id="toc-introduction-to-qgis-spatial-data-and-spatial-analysis" class="nav-link" data-scroll-target="#introduction-to-qgis-spatial-data-and-spatial-analysis">Introduction to QGIS: Spatial Data and Spatial Analysis</a></li>
  <li><a href="#introduction-to-qgis-understanding-and-presenting-spatial-data" id="toc-introduction-to-qgis-understanding-and-presenting-spatial-data" class="nav-link" data-scroll-target="#introduction-to-qgis-understanding-and-presenting-spatial-data">Introduction to QGIS: Understanding and Presenting Spatial Data</a></li>
  <li><a href="#confident-spatial-analysis-in-qgis" id="toc-confident-spatial-analysis-in-qgis" class="nav-link" data-scroll-target="#confident-spatial-analysis-in-qgis">Confident Spatial Analysis in QGIS</a></li>
  <li><a href="#essex-summer-school" id="toc-essex-summer-school" class="nav-link" data-scroll-target="#essex-summer-school">Essex Summer School</a></li>
  <li><a href="#other-courses" id="toc-other-courses" class="nav-link" data-scroll-target="#other-courses">Other Courses</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Training Courses</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="columns">
<div class="column" style="width:55%;">
<p>I offer a variety of training courses on GIS and spatial data, including introductory and advanced training using QGIS and R. My training is designed to both teach you about GIS itself and how to use the software to do make maps and perform spatial analysis.</p>
</div><div class="column" style="width:35%;">
<p><img src="images/2019-06-13 12.26.53-students-at-desk.jpg" class="img-fluid" width="500"></p>
</div>
</div>
<p>My courses are constantly being developed to take advantage of the latest changes in QGIS and R. Below is a list of the courses coming up, and a link to sign up (where available). If a course does not have a date, then please join my <a href="mailing-list.html">mailing list</a> to hear when new dates are confirmed.</p>
<p>If you would like a course run for a group of you, or have any questions, then please do <a href="index.html">contact me</a> or email <a href="mailto:nick@nickbearman.com">nick@nickbearman.com</a> to discuss your needs and get a quote.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th>Introductory</th>
<th>Advanced</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>R</td>
<td><a href="#introduction-to-spatial-data-using-r-as-a-gis">Introduction to Spatial Data and Using R as a GIS</a> <em>March&nbsp;2025</em> &amp; <em>May&nbsp;2025</em></td>
<td><a href="#advanced-R-as-a-gis:-spatial-analysis-and-statistics">Advanced R as a GIS: Spatial Analysis and Statistics</a> <em>June&nbsp;2025</em></td>
</tr>
<tr class="even">
<td>QGIS</td>
<td><a href="#introduction-to-qgis-understanding-and-presenting-spatial-data">Introduction to QGIS: Understanding and Presenting Spatial Data</a>* <em>April&nbsp;2025</em></td>
<td><a href="#confident-spatial-analysis-in-qgis">Confident Spatial Analysis in QGIS</a>* <em>April&nbsp;2025</em></td>
</tr>
</tbody>
</table>
<p>*often presented together as “<a href="#introduction-to-qgis-spatial-data-and-spatial-analysis">Introduction to QGIS: Spatial Data and Spatial Analysis</a>” over 4 half-day sessions. <em>April 2025</em></p>
<hr>
<section id="introduction-to-spatial-data-using-r-as-a-gis" class="level3">
<h3 class="anchored" data-anchor-id="introduction-to-spatial-data-using-r-as-a-gis">Introduction to Spatial Data and Using R as a GIS</h3>
<div class="columns">
<div class="column" style="width:58%;">
<p>In this two half day course we will explore how to use R to import, manage and process spatial data. We will also cover the process of making choropleth maps, as well as some basic spatial analysis. Finally, we will cover the use of loops to make multiple maps quickly and easily, one of the major benefits of using a scripting language to make maps, rather than traditional graphic point-and-click interface. <em><a href="files/intro-to-r-promo.pdf">More details</a></em>.</p>
<p>No previous experience of coding is required, although participants would benefit from some experience of using spatial data (e.g.&nbsp;Google Maps).</p>
<p><a href="https://instats.org/seminar/introduction-to-spatial-data-and-r-as-a-2">Tue 4th and Wed 5th March 2025, 10am - 1pm, online, InStats.</a></p>
<p><a href="https://www.ncrm.ac.uk/training/show.php?article=13706">Tue 27th and Wed 28th May 2025, 10am – 1pm, online, NCRM.</a></p>
<!-- [No dates scheduled, join my mailing list to hear when new dates are confirmed.](mailing-list.html) -->
</div><div class="column" style="width:42%;">
<p><img src="images/r-map-output.png" class="img-fluid"></p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
“Nice balance of theory and practice. Also useful to learn what to look for if things go wrong. Content was flexible to include what might be useful for our work.”
</div>
</div>
<div class="callout-body-container callout-body">
<p><em>Vickie, Analyst, Public Health Wales</em></p>
</div>
</div>
<hr>
</section>
<section id="advanced-R-as-a-gis:-spatial-analysis-and-statistics" class="level3">
<h3 class="anchored" data-anchor-id="advanced-R-as-a-gis:-spatial-analysis-and-statistics">Advanced R as a GIS: Spatial Analysis and Statistics</h3>
<div class="columns">
<div class="column" style="width:55%;">
<p>In this two part course we will show you how to prepare and conduct spatial analysis on a variety of spatial data in R, including a range of spatial overlays and data processing techniques. We will also cover how to use GeoDa to perform exploratory spatial data analysis, including making use of linked displays and measures of spatial autocorrelation and clustering. <em><a href="files/advanced-r-promo.pdf">More details</a></em>.</p>
<p><em>This course can follow-on from the <a href="#introduction-to-spatial-data-using-r-as-a-gis">Introduction to Spatial Data &amp; Using R as a GIS</a> course above, or be run independently if participants have some previous knowledge of R / RStudio and spatial data.</em></p>
<p><em>This course used to be called <strong>Confident Spatial Analysis and Statistics in R &amp; GeoDa</strong>, and is the same material with a new, better, less wordy name!</em></p>
</div><div class="column" style="width:45%;">
<p><img src="images\spatial-overlay.png" class="img-fluid"></p>
</div>
</div>
<p><a href="https://www.ncrm.ac.uk/training/show.php?article=13707">Tue 3rd and Wed 4th June 2025, 10am – 1pm, online.</a></p>
<!-- [No dates scheduled, join my mailing list to hear when new dates are confirmed.](mailing-list.html) -->
<hr>
</section>
<section id="introduction-to-qgis-spatial-data-and-spatial-analysis" class="level3">
<h3 class="anchored" data-anchor-id="introduction-to-qgis-spatial-data-and-spatial-analysis">Introduction to QGIS: Spatial Data and Spatial Analysis</h3>
<p><em>This course is the <a href="#introduction-to-qgis-understanding-and-presenting-spatial-data">Introduction to QGIS</a> and <a href="#confident-spatial-analysis-in-qgis">Confident Spatial Analysis in QGIS</a> courses run back to back.</em></p>
<p><a href="https://www.ncrm.ac.uk/training/show.php?article=13700">Tue 1st, Wed 2nd, Tue 8th and Wed 9th April 2025, 10am – 1pm, online.</a></p>
<!-- [No dates scheduled, join my mailing list to hear when new dates are confirmed.](mailing-list.html) -->
<hr>
</section>
<section id="introduction-to-qgis-understanding-and-presenting-spatial-data" class="level3">
<h3 class="anchored" data-anchor-id="introduction-to-qgis-understanding-and-presenting-spatial-data">Introduction to QGIS: Understanding and Presenting Spatial Data</h3>
<p>In this two part introductory course we will give you an overview on how GIS works, and what we can and can’t do with spatial data. We assume no prior knowledge of GIS and will explain how to get data into the GIS as well as how to produce maps using your own data. <em><a href="files/intro-to-qgis-promo.pdf">More details</a>.</em></p>
<p><em>This course requires no prior knowledge of GIS or spatial data. A level of basic computer experience is required; such as using websites, Word and saving &amp; moving files.</em></p>
<p><em>Attendees on this course can choose to receive a <a href="https://www.qgis.org/community/certification/">Certificate of Completion</a>, certified by QGIS for a donation of €20. <a href="https://changelog.qgis.org/en/qgis/certifyingorganisation/geospatial-training-solutions/">Geospatial Training Solutions / Nick Bearman</a> is a QGIS approved training organisation, and a donation of €20 for each participant will be made to the QGIS Foundation, supporting the development of QGIS.</em></p>
<p><a href="https://www.ncrm.ac.uk/training/show.php?article=13700"><em>Being run as Introduction to QGIS: Spatial Data and Spatial Analysis on</em> Tue 1st, Wed 2nd, Tue 8th and Wed 9th April 2025, 10am – 1pm, online.</a></p>
<!-- [No dates scheduled, join my mailing list to hear when new dates are confirmed.](mailing-list.html) -->
<p><img src="images/qgis-screenshot.png" class="img-fluid"></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
“I love having a workbook to go through, it’s how I learn best. Also, perfect balance between presentation and practical work.”
</div>
</div>
<div class="callout-body-container callout-body">
<p><em>Harriet Ann Patrick, PhD Researcher, University of Sheffield</em></p>
</div>
</div>
<hr>
</section>
<section id="confident-spatial-analysis-in-qgis" class="level3">
<h3 class="anchored" data-anchor-id="confident-spatial-analysis-in-qgis">Confident Spatial Analysis in QGIS</h3>
<p>This intermediate two part course will develop your skills of using spatial data, including collating data from a variety of sources including XY coordinate data and address or postcode based data. We will also cover using spatial overlays, point-in-polygon analysis and spatial joins. <em><a href="files/confident-spatial-analysis-promo.pdf">More details</a>.</em></p>
<p><em>This course can follow-on from the Introduction to QGIS course above, or be run independently if the participants have some previous knowledge of QGIS and spatial data.</em></p>
<p><em>Attendees on this course can choose to receive a <a href="https://www.qgis.org/community/certification/">Certificate of Completion</a>, certified by QGIS for a donation of €20. <a href="https://changelog.qgis.org/en/qgis/certifyingorganisation/geospatial-training-solutions/">Geospatial Training Solutions / Nick Bearman</a> is a QGIS approved training organisation, and a donation of €20 for each participant will be made to the QGIS Foundation, supporting the development of QGIS.</em></p>
<p><a href="https://www.ncrm.ac.uk/training/show.php?article=13700"><em>Being run as Introduction to QGIS: Spatial Data and Spatial Analysis on</em> Tue 1st, Wed 2nd, Tue 8th and Wed 9th April 2025, 10am – 1pm, online.</a></p>
<!-- [No dates scheduled, join my mailing list to hear when new dates are confirmed.](mailing-list.html) -->
<p><img src="images/pip-spatial-overlays.png" class="img-fluid"></p>
<hr>
</section>
<section id="essex-summer-school" class="level3">
<h3 class="anchored" data-anchor-id="essex-summer-school">Essex Summer School</h3>
<section id="introduction-to-gis-geospatial-data-and-spatial-analysis" class="level4">
<h4 class="anchored" data-anchor-id="introduction-to-gis-geospatial-data-and-spatial-analysis">Introduction to GIS, Geospatial Data and Spatial Analysis</h4>
<p>In this week long (17.5 hours) course at the Essex Summer School, you will gain an in-depth knowledge of spatial data, and how it can be used in a variety of social science applications. You will learn how spatial data is structured, how and where it can be used and how and where it cannot be used. By the end of the course you will be able to apply the skills you have learnt in your own area of study, and there will be time during the course provided to start this with me available to help.</p>
<p><em>This course is a combination of the four courses listed above, plus some additional material.</em></p>
<p><a href="https://essexsummerschool.com/summer-school-facts/courses/ess-2024-course-list/1p-introduction-to-gis-geospatial-data-and-spatial-analysis/">No dates for 2025 yet, but check out 2024 for more details</a></p>
<hr>
</section>
</section>
<section id="other-courses" class="level3">
<h3 class="anchored" data-anchor-id="other-courses">Other Courses</h3>
<p>I have also run a number of other courses, based around the four courses above and tweaked for a bespoke audience. I have delivered bespoke courses to a wide variety of clients including Public Health Wales, Red Bull, National Trails UK and UEA International Development.</p>
<p>I also deliver bespoke GIS training one-to-one and small groups on a <a href="consultancy.html">consultancy</a> basis.</p>
<p>If you are interested in a bespoke course, please <a href="index.html">contact me</a> for a discussion and a quote.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/nickbearman\.github\.io\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>