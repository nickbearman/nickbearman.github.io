<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Nick Bearman">
<meta name="dcterms.date" content="2024-07-15">

<title>OCG Open Standards Code Sprint, Geovation, London, UK – Nick Bearman</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-255bb9699565efef3b08de918ab85faf.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Nick Bearman</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../training-courses.html"> 
<span class="menu-text">Training Courses</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../training-materials.html"> 
<span class="menu-text">Training Materials</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../consultancy.html"> 
<span class="menu-text">Consultancy</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../writing-presentations.html"> 
<span class="menu-text">Writing &amp; Presentations</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="../../blog.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#mentor-stream" id="toc-mentor-stream" class="nav-link active" data-scroll-target="#mentor-stream">Mentor Stream</a></li>
  <li><a href="#training-dml-ai" id="toc-training-dml-ai" class="nav-link" data-scroll-target="#training-dml-ai">Training DML-AI</a></li>
  <li><a href="#r-tmap-v4" id="toc-r-tmap-v4" class="nav-link" data-scroll-target="#r-tmap-v4">R tmap v4</a></li>
  <li><a href="#demo-wrap-up" id="toc-demo-wrap-up" class="nav-link" data-scroll-target="#demo-wrap-up">Demo &amp; Wrap-up</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">OCG Open Standards Code Sprint, Geovation, London, UK</h1>
  <div class="quarto-categories">
    <div class="quarto-category">GIS</div>
    <div class="quarto-category">open source</div>
    <div class="quarto-category">R spatial</div>
    <div class="quarto-category">in person</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Nick Bearman </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">July 15, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>In July I spent three days at <a href="https://geovation.uk/">Geovation</a> in London attending the OGC Open Standards Code Sprint. OGC, the <a href="https://www.ogc.org/">Open Geospatial Consortium</a> manage and approve standards for geospatial data. Many people working in geospatial have heard of them, and have at least a vague idea that they do geospatial standards, even if they don’t know the details of what they do - the position I was in! Dr.&nbsp;Gobe Hobona, Director of Product Management, Standards at OGC, is a regular attendee at FOSS4G:UK and other geo related conferences, and recommended I come along.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td><img src="nick-at-geovation.jpeg" class="img-fluid quarto-figure quarto-figure-left" style="width:100.0%" alt="At Geovation!"></td>
<td><img src="geovation.jpeg" class="img-fluid quarto-figure quarto-figure-right" style="width:87.0%" alt="Deck chairs at Geovation"></td>
</tr>
</tbody>
</table>
<p>I’ve attended some Code Sprints before, including FOSS4G 2022 in Florence but I had never attended a OGC Code Sprint before. They run 4 or 5 a year, each with a different theme, and run one every year in London, usually at Geovation. Gobe had recommended I attend, and as London is relatively accessible for me (compared to Évora, Portugal; St.&nbsp;Louis, MO, US or Geneva, Switzerland; there other venues) I thought I would go along.</p>
<section id="mentor-stream" class="level2">
<h2 class="anchored" data-anchor-id="mentor-stream">Mentor Stream</h2>
<p>Given that OGC were running it, the focus was on standards, as you would expect. However they don’t require a knowledge of standards to attend - they welcome people with any knowledge of OGC standards, including none. For these folks, and those new to code sprints, they run a mentor stream on the first day, running a series of sessions on each of the standards being discussed at the code sprint. This time this included Adding Support to a new OGC API in pygeoapi, SensorThings API WebSub Extension, Consuming OGC API - Connected Systems through OWSLIB and Applying TrainingDML-AI among others, with a short presentation and discussion given by the senior people involved with that standard attending the code sprint.</p>
<p>This code sprint was hybrid, with some people attending online via Discord (including one of the mentor stream presenters). Discord worked well, with a number of channels for different discussions based around topics as well as the mentor stream. We had about 20 people attending in person, with another 6-8 attending online.</p>
<p>Attending the mentor stream was a good starting point, but after a bit of reflection, I discovered that I am not a “standards person”. I have always slightly struggled with policy aspects, one of the reasons I have not pursued my work with <a href="../2023-05-geoai-digital-twins/index.html">ethics &amp; the Locus Charter</a>. However I discovered I wasn’t the only person there who wasn’t a “standards person”. I found some of the standards quite abstract and didn’t really manage to see how some of them relate to my every day work with geospatial data.</p>
</section>
<section id="training-dml-ai" class="level2">
<h2 class="anchored" data-anchor-id="training-dml-ai">Training DML-AI</h2>
<p>One particular standard being developed was the Training ML standard, which was trying to develop automated ways of developing metadata for AI Training Data. I am no AI expert, but even I have picked up on the recent growth in AI and related terms. One key aspect of any AI is that it needs training data - in a very similar way to a supervised classification of a satellite image from remote sensing. A small sample of the data is categorised by a human, sometimes by us (<a href="https://www.techradar.com/news/captcha-if-you-can-how-youve-been-training-ai-for-years-without-realising-it">Google</a> <a href="https://www.google.com/recaptcha/intro/?zbcode=inc5000">reCAPTCHA</a>). For example, this scene has cars in it, in this CCTV there is a bike, this image has a lake in it, etc. Then this 10-20% of the data is used to train the AL model, which then classifies the rest of the data.</p>
<p>So there are many different ways of identifying and classifying a) the training data itself (how much, resolution, etc.) and b) what training process has been applied to it (how much trained, by whom, when, what labels, etc.). There is no systematic way of recording who did what to this data. If we want people to be able to reuse this training data, we need to record this information. Ideally we want this to be machine readable so a) when data is used for training this metadata can be recorded automatically (as very few people bother to record metadata, even when it is required) and b) when the training data is used in other models, some judgement can be made about whether the training data is appropriate for the model it is being applied to.</p>
<p>This topic appealed to me as I could clearly see the benefit of this. The <a href="https://github.com/opengeospatial/TrainingDML-AI_SWG">standard</a> has a GitHub repository, which also makes use of the <a href="https://github.com/openrsgis/pytdml">pytdml library</a> which provides some of the tools to do this. Unfortunately the library and related tutorial didn’t work as expected - partly because there were some changes to the library the day before the session, and partly because the planned Jupyter Notebook wasn’t able to be developed in time for the session.</p>
<p>This library was in Python and I am not a Python expert. I was struggling to get it to work, and fortunately I had the benefit of Daniel’s experience to help me with this (someone else attending the code sprint). I wasn’t experienced enough to know whether I was doing something wrong, or whether the library was broken. He reassured me that it was the library that wasn’t working, rather than me getting things wrong!</p>
<p>Getting help from others is one of the big benefits of attending a code sprint and I got much further with the tutorial that I would have had I been on my own. Each day we also had a “stand up” at the beginning to say briefly what we were going to do and a “brief back” at the end to say what we had done. In these people shared their experiences and I think it’s fair to say most people progressed quite slowly. Many people didn’t get a huge amount done on the first day and it was reassuring that I wasn’t the only one not making a lot of progress! In fact, someone who had a reasonable amount of experience had essentially a days work that ended up being no use! He had two routes to take to develop a certain feature - the easy route or the hard route. He started off spending a day working on the easy route and then realised it was a dead end - so had to start again on next day with the hard route! It’s very reassuring that everyone goes through this process - newbie or experienced.</p>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="codesprint.jpeg" class="img-fluid quarto-figure quarto-figure-left figure-img" alt="Getting help and networking at the code sprint"></p>
</figure>
</div>
<p>Over the code sprint I learnt quite a bit more about Python and how it works with different packages and virtual environments. I also experience <a href="https://medium.com/knerd/the-nine-circles-of-python-dependency-hell-481d53e3e025">Python dependency hell</a>, with circular dependencies meaning we had to do various unpicking’s of both my setup and the library to work out what was going on.</p>
</section>
<section id="r-tmap-v4" class="level2">
<h2 class="anchored" data-anchor-id="r-tmap-v4">R tmap v4</h2>
<p>I also spent a bit of time working on the R tmap library. I was the only person working on R there (probably partly because this clashed with the <a href="https://events.linuxfoundation.org/user/">UseR</a> conference so many R Spatial people were there in Salzburg, Austria!). Tmap version 4 is coming, so I needed to re-write some of my practical workbooks to make the mapping code work with version 4. V4 isn’t out on CRAN yet, but I want to be prepared when it is released, which I think will be later this year. See <a href="https://r-tmap.github.io/tmap/">these</a> <a href="https://mtennekes.github.io/tmap4/">pages</a> for more details. I <a href="https://github.com/nickbearman/confident-spatial-analysis/commit/5ebcce53abe68164d03481bcfd3eceb6c70e23b3">updated</a> the code for one of my courses I am running this <a href="https://nickbearman.github.io/training-courses.html#confident-spatial-analysis-and-statistics-in-r-geoda">week</a>. I also added a little bit of information to the tmap website so it is a bit clearer to new uses that tmap 4 is coming and some suggestions as to how the code has changes and how they can try it out: short version - try it on <a href="https://posit.cloud">posit.cloud</a> rather than risk messing up your current installation!</p>
</section>
<section id="demo-wrap-up" class="level2">
<h2 class="anchored" data-anchor-id="demo-wrap-up">Demo &amp; Wrap-up</h2>
<p>At the end of the code sprint we had a demo and wrap up where everyone demoed what they did and it was fascinating to see what people had done. I also discovered a new QGIS plugin <a href="https://www.linkedin.com/pulse/met-office-introduces-qgis-ogc-edr-plugin-matt-wardle-axgpe/">(EDR)</a> and as I mentioned I was working in R, I had a couple of interesting discussions about how R package management compares with Pythons package management.</p>
<p>Overall I am glad I gave the OGC Code Sprint a try. I’m not sure whether I would do it again; it’s good to see what people are doing in the geospatial standards world and have some time to try bits out, but I really struggled with a lack of concrete examples that were relevant to my experience. If you are interested in standards in general, or they are working on a specific standard or tool you are interested then I would really recommend attending. If there are any code sprints on spatial tools in R, then I will certainly be attending if I can!</p>
<p>If this has got you interest, I am involved in running Code by the Coast, OSGeo:UK’s next Code Sprint on 30th July in Portland, Dorset, UK. We are running this as an in-person event only. Check out the <a href="https://uk.osgeo.org/code-sprint-2024.html">website</a> for more details. We will have groups working on Terra Draw, GIFramework and Registering your project as a OSGeo Community project. I may even be doing some R work too!</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/nickbearman\.github\.io\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p><a href="privacy-notice.html">Privacy Notice</a> | <a href="index.html">Contact</a></p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>